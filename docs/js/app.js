!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";t.__esModule=!0;var r=n(13),o=n(3),i=n(1),a=n(14),u=i.map(a.AppView,o.state);r["default"](document.getElementById("app"),u),o.spawnMany(3)},function(e,t){"use strict";function n(e){return{listeners:[],active:!0,value:e}}function r(e){var t=n();return e(function(e){f(t,e),l(t)}),t}function o(e){var t=n();return e.then(function(e){f(t,e),l(t)})["catch"](function(e){f(t,e instanceof Error?e:new Error(e))}),t}function i(e,t){function r(e){f(o,e)}var o=n();return o.stop=function(){e.removeEventListener(t,r,!1)},e.addEventListener(t,r,!1),o}function a(e){var t=0,r=n(t),o=setInterval(function(){t++,f(r,t)},e);return r.stop=function(){clearInterval(o)},r}function u(){function e(n){f(t,n),window.requestAnimationFrame(e)}var t=n(0);return window.requestAnimationFrame(e),t}function c(e,t){return e.active&&e.listeners.push(t),e}function s(e,t){return e.listeners=e.listeners.filter(function(e){return e!==t}),e}function f(e,t){return e.active&&(e.value=t,e.listeners.forEach(function(e){e(t)})),e}function l(e){return e.listeners=[],e.active=!1,e.stop&&e.stop(),e}function d(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=n();return t.forEach(function(n){c(n,function(){var n=t.map(function(e){return e.value});f(o,e.apply(null,n))})}),o}function v(e,t){var r=n();return c(t,function(t){e(t)&&f(r,t)}),r}function p(e){var t=n();return e.value&&f(t,e.value),c(e,function(e){e!==t.value&&f(t,e)}),t}function m(e,t,r){var o=n(t);return c(r,function(n){f(o,t=e(n,t))}),o}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=n();return e.forEach(function(e){c(e,function(e){f(r,e)})}),r}function g(e,t){var r=n();return e.value&&f(r,e.value),c(t,function(){f(r,e.value)}),r}function y(e,t){var r=n(),o=[];return c(t,function(t){o.length>e-1&&o.shift(),o.push(t),f(r,o.slice())}),r}function x(e,t){var r=n();return c(t,function(t){c(e(t),function(e){f(r,e)})}),r}function b(e,t){var r,o=n();return c(t,function(t){r&&l(r),r=e(t),c(r,function(e){f(o,e)})}),o}function k(e,t){return b(function(e){return r(function(n){setTimeout(function(){n(e)},t)})},e)}t.create=n,t.fromCallback=r,t.fromPromise=o,t.fromDomEvent=i,t.fromInterval=a,t.fromAnimationFrames=u,t.listen=c,t.unlisten=s,t.send=f,t.stop=l,t.map=d,t.filter=v,t.dropRepeats=p,t.fold=m,t.merge=h,t.sampleOn=g,t.slidingWindow=y,t.flatMap=x,t.flatMapLatest=b,t.debounce=k},function(e,t){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function r(){var e=n();return{key:e,state:(t={},t[e]=0,t)};var t}function o(e,t,n){if(void 0===n&&(n=1),n<0)throw new Error("Can't decrement a GCounter");"undefined"!=typeof e.state[t]?e.state[t]+=n:e.state[t]=n}function i(e,t,n){e.state[t]=n}function a(e){var t=0;for(var n in e.state)t+=e.state[n];return t}function u(e,t){var n={},r={key:String(e.key),state:{}};for(var o in e.state)n[o]=!0;for(var o in t.state)n[o]=!0;for(var o in n)r.state[o]=Math.max(e.state[o]||0,t.state[o]||0);return r}t.__esModule=!0,t.create=r,t.increment=o,t.update=i,t.query=a,t.merge=u},function(e,t,n){"use strict";function r(e){var n=t.state.value,r=v.firstKey(n,function(t){return String(t.index)===e});return r?{command:"increment",key:r}:{command:"none"}}function o(e){var n=t.state.value;switch(e.command){case"increment":n[e.key].worker.postMessage(e)}}function i(e,t){switch(e.command){case"created":return y++,v.set(t,(n={},n[e.gc.key]={index:y,worker:e.worker,gc:e.gc,emitting:!1},n));case"increment":return u(e.key),t;case"incremented":return v.set(t,(r={},r[e.gc.key]=v.set(t[e.gc.key],{gc:l.merge(t[e.gc.key].gc,e.gc)}),r));case"notify":return c(e.gc),v.set(t,(o={},o[e.gc.key]=v.set(t[e.gc.key],{emitting:!0}),o));case"notified":return v.set(t,(i={},i[e.gc.key]=v.set(t[e.gc.key],{emitting:!1}),i));case"merged":return v.set(t,(a={},a[e.gc.key]=v.set(t[e.gc.key],{gc:l.merge(t[e.gc.key].gc,e.gc)}),a));default:return t}var n,r,o,i,a}function a(e){d.send(h,{command:"increment",key:e})}function u(e){var n=t.state.value;n[e].worker.postMessage({command:"increment",key:e})}function c(e){var n=t.state.value;for(var r in n)r!==e.key&&n[r].worker.postMessage({command:"merge",gc:e})}function s(){var e=new Worker("js/GCounterWorker.js");return e.onmessage=function(t){var n=t.data;"created"===n.command&&(n.worker=e),d.send(g,n)},e}function f(e){for(;e>0;)s(),e--}t.__esModule=!0;var l=n(2),d=n(1),v=n(4),p=n(12),m=d.map(r,p.fromKeys()),h=d.create({command:"none"}),g=d.create({command:"none"});d.listen(m,o),d.listen(h,o);var y=0,x={};t.state=d.fold(i,x,g),t.increment=a,t.spawn=s,t.spawnMany=f},function(e,t){"use strict";function n(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function r(e,t){for(var n in e)if(t(e[n],n))return n}function o(e,t){var n=[];for(var r in e)n.push(t(e[r],r));return n}t.__esModule=!0,t.set=n,t.firstKey=r,t.mapObject=o},function(e,t){"use strict";function n(e){return new a(Math.ceil(e/32))}function r(e,t){var n=t%32,r=(t-n)/32;e[r]|=1<<n}function o(e,t){var n=t%32,r=(t-n)/32;e[r]&=~(1<<n)}function i(e,t){var n=t%32,r=(t-n)/32;return!!(e[r]&1<<n)}Object.defineProperty(t,"__esModule",{value:!0});var a="undefined"==typeof Uint32Array?Array:Uint32Array;t.createBv=n,t.setBit=r,t.clearBit=o,t.getBit=i},function(e,t,n){t=e.exports=n(7)(),t.push([e.id,".app{font-family:Helvetica Neue,Arial;padding:20px;text-align:center}.app h1{font-size:2em;font-weight:300;padding-bottom:30px}.app a{text-decoration:none;color:#00f}.app button{padding:10px 15px;font-size:1em;background:#fff;border:none;border-radius:25px;box-shadow:0 1px 4px rgba(0,0,0,.5);color:#666}.counter{display:inline-block;padding:10px;margin:10px;width:50px}.total{text-align:center;padding:10px;font-size:1em;transition:font-size .3s ease;height:30px}.emitting .total{font-size:1.5em}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){"use strict";function r(e,t,n,r){function l(e,t){return r(e)===r(t)}for(var d=0,v=0,p=e.length-1,m=t.length-1,h=e[d],g=t[v];d<=p&&v<=m&&l(h,g);)n(c,h,g,v),h=e[++d],g=t[++v];if(!(v>m&&d>p)){for(var y=e[p],x=t[m],b=0;d<=p&&v<=m&&l(h,x);)n(s,h,x,p-b+1),h=e[++d],x=t[--m],++b;for(;p>=d&&v<=m&&l(g,y);)n(s,y,g,v),y=e[--p],g=t[++v],--b;for(;p>=d&&m>=v&&l(y,x);)n(c,y,x,m),y=e[--p],x=t[--m];if(d>p)for(;v<=m;)n(u,null,g,v),g=t[++v];else if(v>m)for(;d<=p;)n(f,h),h=e[++d];else{for(var k=0,w=null,E=d-b,M=d,C=(0,a.createBv)(p-d),A=i(e,d,p+1,r);v<=m;g=t[++v]){var L=A[r(g)];o(L)?(n(u,null,g,E++),++k):d!==L?((0,a.setBit)(C,L-M),n(s,e[L],g,E++)):w=v}null!==w&&((0,a.setBit)(C,0),n(s,e[d],t[w],w));for(var R=e.length-t.length+k,U=0;U<R;h=e[++d])(0,a.getBit)(C,d-M)||(n(f,h),++U)}}}function o(e){return"undefined"==typeof e}function i(e,t,n,r){for(var o={},i=t;i<n;++i)o[r(e[i])]=i;return o}Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVE=t.MOVE=t.UPDATE=t.CREATE=void 0;var a=n(5),u=0,c=1,s=2,f=3;t["default"]=r,t.CREATE=u,t.UPDATE=c,t.MOVE=s,t.REMOVE=f},function(e,t,n){"use strict";function r(e){return e instanceof Array?typeof e[0]===x?D:B:typeof e===g||typeof e===y?U:O}function o(e,t){return e instanceof Array&&e[1]&&e[1].key||t}function i(e,t){var n,r,i=[];for(r=0;r<e.length;r++)n=e[r],i.push({key:o(n,r),vDom:n,element:t&&t[r]});return i}function a(e){return e.key}function u(e){return!(e===!1||void 0===e||null===e)}function c(e,t,n){return t[2]=t[2]?t[2].filter(u):[],h["default"](i(e[2]||[],n.childNodes),i(t[2]),function(e,t,r,o){var i;switch(e){case h.CREATE:i=p(r.vDom),i&&n.insertBefore(i,n.childNodes[o]||null);break;case h.UPDATE:s(t.vDom,r.vDom,t.element,n);break;case h.MOVE:n.insertBefore(s(t.vDom,r.vDom,t.element,n),t.element);break;case h.REMOVE:n.removeChild(t.element)}},a),n}function s(e,t,n,o){if(void 0===n)throw new Error("No dom node to update");if(e!==t){var i,a=void 0!==e,u=void 0!==t;if(!a&&u)i=p(t),i&&o.appendChild(i);else if(a&&!u)o.removeChild(n);else if(a&&u){var s=r(e),d=r(t);if(l(e,t,s,d))switch(d){case B:f(e[1]||{},t[1]||{},n),c(e,t,n);break;case D:(t[0].shouldUpdate?t[0].shouldUpdate(e[1],t[1]):t[1]&&e[1]&&t[1]!==e[1])?(t[2]=t[0](t[1]),f(e[2][1]||{},t[2][1]||{},n),c(e[2],t[2],n)):t[2]=e[2]}else e!==t&&(i=p(t),i&&o.replaceChild(i,n))}return n}}function f(e,t,n){var r,o,i,a,u=e[A],c=t[A];for(r in e)if(o=e[r],i=t[r],void 0===i||null===i||i===!1)switch(r){case A:case b:break;case w:case M:case E:n[r]=!1;break;case k:n.value=L;break;case C:n.blur();break;default:n.removeAttribute(r)}for(r in t)if(o=e[r],i=t[r],void 0!==i&&null!==i&&i!==!1&&i!==o&&typeof i!==x)switch(r){case A:case b:break;case w:case M:case E:case k:n[r]=i;break;case C:n.focus();break;default:n.setAttribute(r,i)}if(u&&!c)for(a in u)n.removeEventListener(a,u[a]);else if(!u&&c)for(a in c)n.addEventListener(a,c[a]);else if(u&&c){for(a in u)c[a]||n.removeEventListener(a,u[a]);for(a in c)u[a]!==c[a]&&(u[a]&&n.removeEventListener(a,u[a]),n.addEventListener(a,c[a]))}return n}function l(e,t,n,r){return n===r&&(n===B||n===D)&&e[0]===t[0]}function d(e){switch(r(e)){case D:return e[2]=e[0](e[1]),v(e[2]);case B:return v(e);case U:return"<span>"+e+"</span>";default:return""}}function v(e){var t,n,r,o,i,a=e[0],c=e[1],s=[];if(e[2]=e[2]?e[2].filter(u):[],t=e[2],c)for(r in c)n=c[r],void 0!==n&&null!==n&&n!==!1&&r!==b&&r!==A&&s.push(r+'="'+n+'"');if(i="<"+[a].concat(s).join(" ")+">",!R[a]){for(o=0;o<t.length;o++)void 0!==o&&null!==o&&o!==!1&&(i+=d(t[o]));i+="</"+a+">"}return i}function p(e){switch(r(e)){case U:case B:case D:if(0===e.length)return;var t=document.createElement("div");t.innerHTML=d(e);var n=t.firstChild;return m(e,n),n;case O:return}}function m(e,t){var n,o,i,a,u,c,s=r(e);if(s!==U&&s!==O){if(n=s===D?e[2]:e,o=n[1],c=n[2],o&&(i=o[A]))for(a in i)t.addEventListener(a,i[a]);if(c)for(u=0;u<c.length;u++)m(c[u],t.childNodes[u])}}var h=n(8),g="string",y="number",x="function",b="key",k="value",w="checked",E="selected",M="disabled",C="focus",A="on",L="",R={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},U=0,B=1,D=2,O=3;t.updateDom=s,t.vDomToHtmlString=d,t.vNodeToHtmlString=v,t.vDomToDom=p},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=v[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(s(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(s(r.parts[i],t));v[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],u=o[2],c=o[3],s={css:a,media:u,sourceMap:c};n[i]?n[i].parts.push(s):t.push(n[i]={id:i,parts:[s]})}return t}function i(e,t){var n=h(),r=x[x.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function u(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function c(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function s(e,t){var n,r,o;if(t.singleton){var i=y++;n=g||(g=u(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(t),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(t),r=l.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var v={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,x=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var u=n[a],c=v[u.id];c.refs--,i.push(c)}if(e){var s=o(e);r(s,t)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var f=0;f<c.parts.length;f++)c.parts[f]();delete v[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(6);"string"==typeof r&&(r=[[e.id,r,""]]);n(10)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";function r(){var e=o.create("");return window.onkeypress=function(t){o.send(e,String.fromCharCode(t.keyCode))},e}t.__esModule=!0;var o=n(1);t.fromKeys=r},function(e,t,n){"use strict";function r(e,t){var n=document.createElement("div"),r={domNode:n,vDom:["div",{},[]]};return e.appendChild(n),o.fold(function(t,n){var r=n.domNode,o=n.vDom;return i.updateDom(o,t,r,e),{domNode:r,vDom:t}},r,t)}t.__esModule=!0;var o=n(1),i=n(9);t["default"]=r},function(e,t,n){"use strict";function r(e){var t=e.key,n=e.total,r=e.emitting;return[s,{"class":"counter"+(r?" emitting":"")},[[s,{"class":"total"},[n]],[f,{on:{click:function(){a.increment(t)}}},["&plus;"]]]]}function o(e){return[s,{"class":"app"},[[l,c,["count them beans"]],[v,c,[[d,{href:"https://github.com/twfarland/count-them-beans"},["source"]]]],[f,{on:{click:a.spawn}},["spawn counter"]],[s,c,u.mapObject(e,function(e,t){return[r,{key:e.gc.key,total:i.query(e.gc),emitting:e.emitting}]})]]]}t.__esModule=!0;var i=n(2),a=n(3),u=n(4);n(11);var c=null,s="div",f="button",l="h1",d="a",v="p";t.AppView=o}]);